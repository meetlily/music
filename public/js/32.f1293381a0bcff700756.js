(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"4/DB":function(e,t,n){"use strict";var r=n("TbZa");n.n(r).a},Kgac:function(e,t,n){"use strict";n.r(t);var r=n("JspL"),a=n("c8RX"),s=n("ilaN"),o=n("OUsP"),i=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},c=r.a.extend({components:{Btn:()=>n.e(0).then(n.bind(null,"i0GK"))},data:()=>({preferences:a.f,demo:!1,state:a.l.state,cache:a.l.stub,pwd:"",confirmPwd:"",sharedState:a.j.state,validation:{error:!1}}),methods:{update(){return i(this,void 0,void 0,(function*(){this.validation.error=Boolean((this.pwd||this.confirmPwd)&&this.pwd!==this.confirmPwd),this.validation.error||(yield a.l.updateProfile(this.pwd),this.pwd="",this.confirmPwd="")}))},connectToLastfm:()=>{window.open(`${window.BASE_URL}api/lastfm/connect?jwt-token=${o.f.get("jwt-token")}`,"_blank","toolbar=no,titlebar=no,location=no,width=1024,height=640")},disconnectFromLastfm:()=>o.e.delete("lastfm/disconnect",{},s.i)}}),l=(n("4/DB"),n("KHd+")),p=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"profileWrapper"}},[e._m(0),e._v(" "),n("div",{staticClass:"main-scroll-wrap"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.update(t)}}},[n("div",{staticClass:"form-row"},[n("label",{attrs:{for:"inputProfileName"}},[e._v("Name")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.state.current.name,expression:"state.current.name"}],attrs:{type:"text",name:"name",id:"inputProfileName"},domProps:{value:e.state.current.name},on:{input:function(t){t.target.composing||e.$set(e.state.current,"name",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-row"},[n("label",{attrs:{for:"inputProfileEmail"}},[e._v("Email Address")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.state.current.email,expression:"state.current.email"}],attrs:{type:"email",name:"email",id:"inputProfileEmail"},domProps:{value:e.state.current.email},on:{input:function(t){t.target.composing||e.$set(e.state.current,"email",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"change-pwd"},[e._m(1),e._v(" "),n("div",{staticClass:"form-row"},[n("label",{attrs:{for:"inputProfilePassword"}},[e._v("New Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],class:{error:e.validation.error},attrs:{name:"password",type:"password",id:"inputProfilePassword",autocomplete:"off"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-row"},[n("label",{attrs:{for:"inputProfileConfirmPassword"}},[e._v("Confirm Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPwd,expression:"confirmPwd"}],class:{error:e.validation.error},attrs:{name:"confirmPassword",type:"password",id:"inputProfileConfirmPassword",autocomplete:"off"},domProps:{value:e.confirmPwd},on:{input:function(t){t.target.composing||(e.confirmPwd=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-row"},[n("btn",{staticClass:"btn-submit",attrs:{type:"submit"}},[e._v("Save")]),e._v(" "),e.demo?n("span",{staticStyle:{"font-size":".95rem",opacity:".7","margin-left":"5px"}},[e._v("\n          Changes will not be saved in the demo version.\n        ")]):e._e()],1)]),e._v(" "),n("div",{staticClass:"preferences"},[n("div",{staticClass:"form-row"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.preferences.notify,expression:"preferences.notify"}],attrs:{type:"checkbox",name:"notify"},domProps:{checked:Array.isArray(e.preferences.notify)?e._i(e.preferences.notify,null)>-1:e.preferences.notify},on:{change:function(t){var n=e.preferences.notify,r=t.target,a=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.preferences,"notify",n.concat([null])):s>-1&&e.$set(e.preferences,"notify",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.preferences,"notify",a)}}}),e._v("\n          Show “Now Playing” song notification\n        ")])]),e._v(" "),n("div",{staticClass:"form-row"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.preferences.confirmClosing,expression:"preferences.confirmClosing"}],attrs:{type:"checkbox",name:"confirmClosing"},domProps:{checked:Array.isArray(e.preferences.confirmClosing)?e._i(e.preferences.confirmClosing,null)>-1:e.preferences.confirmClosing},on:{change:function(t){var n=e.preferences.confirmClosing,r=t.target,a=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.preferences,"confirmClosing",n.concat([null])):s>-1&&e.$set(e.preferences,"confirmClosing",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.preferences,"confirmClosing",a)}}}),e._v("\n          Confirm before closing Koel\n        ")])]),e._v(" "),n("div",{staticClass:"form-row"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.preferences.transcodeOnMobile,expression:"preferences.transcodeOnMobile"}],attrs:{type:"checkbox",name:"transcodeOnMobile"},domProps:{checked:Array.isArray(e.preferences.transcodeOnMobile)?e._i(e.preferences.transcodeOnMobile,null)>-1:e.preferences.transcodeOnMobile},on:{change:function(t){var n=e.preferences.transcodeOnMobile,r=t.target,a=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.preferences,"transcodeOnMobile",n.concat([null])):s>-1&&e.$set(e.preferences,"transcodeOnMobile",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.preferences,"transcodeOnMobile",a)}}}),e._v("\n          Convert and play media at 128kbps on mobile\n        ")])]),e._v(" "),n("div",{staticClass:"form-row"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.preferences.showAlbumArtOverlay,expression:"preferences.showAlbumArtOverlay"}],attrs:{type:"checkbox",name:"showAlbumArtOverlay"},domProps:{checked:Array.isArray(e.preferences.showAlbumArtOverlay)?e._i(e.preferences.showAlbumArtOverlay,null)>-1:e.preferences.showAlbumArtOverlay},on:{change:function(t){var n=e.preferences.showAlbumArtOverlay,r=t.target,a=!!r.checked;if(Array.isArray(n)){var s=e._i(n,null);r.checked?s<0&&e.$set(e.preferences,"showAlbumArtOverlay",n.concat([null])):s>-1&&e.$set(e.preferences,"showAlbumArtOverlay",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.preferences,"showAlbumArtOverlay",a)}}}),e._v("\n          Show a translucent, blurred overlay of the current album’s art (may be CPU intensive)\n        ")])])]),e._v(" "),n("section",{staticClass:"lastfm"},[n("h1",[e._v("Last.fm Integration")]),e._v(" "),e.sharedState.useLastfm?n("div",[n("p",[e._v("This installation of Koel integrates with Last.fm.\n          "),e.state.current.preferences.lastfm_session_key?n("span",[e._v("\n            It appears that you have connected your Last.fm account as well – Perfect!\n          ")]):n("span",[e._v("\n            It appears that you haven’t connected to your Last.fm account though.\n          ")])]),e._v(" "),e._m(2),e._v(" "),n("div",{staticClass:"buttons"},[n("btn",{staticClass:"connect",on:{click:function(t){return t.preventDefault(),e.connectToLastfm(t)}}},[n("i",{staticClass:"fa fa-lastfm"}),e._v("\n            "+e._s(e.state.current.preferences.lastfm_session_key?"Reconnect":"Connect")+"\n          ")]),e._v(" "),e.state.current.preferences.lastfm_session_key?n("btn",{staticClass:"disconnect",on:{click:function(t){return t.preventDefault(),e.disconnectFromLastfm(t)}}},[e._v("\n            Disconnect\n          ")]):e._e()],1)]):n("div",[n("p",[e._v("This installation of Koel has no Last.fm integration.\n          "),e.state.current.is_admin?n("span",[e._v("Visit\n            "),n("a",{attrs:{href:"https://docs.koel.dev/3rd-party.html#last-fm",target:"_blank"}},[e._v("Koel’s Wiki")]),e._v("\n            for a quick how-to.\n          ")]):n("span",[e._v("Try politely asking your administrator to enable it.")])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"heading"},[t("span",[this._v("Profile & Preferences")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-row"},[t("p",{staticClass:"help"},[this._v("\n            If you want to change your password, enter it below. "),t("br"),this._v("\n            Otherwise, just leave the next two fields empty.\n          ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n          Connecting Koel and your Last.fm account enables such exciting features as\n          "),t("a",{attrs:{href:"https://www.last.fm/about/trackmymusic",target:"_blank"}},[this._v("scrobbling")]),this._v(".\n        ")])}],!1,null,null,null);t.default=p.exports},TbZa:function(e,t,n){var r=n("WRtP");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},WRtP:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"#profileWrapper input[type=text], #profileWrapper input[type=email], #profileWrapper input[type=password] {\n  width: 192px;\n}\n#profileWrapper input.error {\n  box-shadow: 0 0 0px 1000px #ff867a inset;\n}\n#profileWrapper .change-pwd {\n  margin-top: 24px;\n}\n#profileWrapper .status {\n  margin-left: 8px;\n  color: #56a052;\n}\n#profileWrapper .preferences {\n  margin-top: 32px;\n  border-top: 1px solid #282828;\n}\n#profileWrapper .preferences label {\n  font-size: 13px;\n}\n#profileWrapper .lastfm {\n  border-top: 1px solid #282828;\n  color: #a0a0a0;\n  margin-top: 16px;\n  padding-top: 16px;\n}\n#profileWrapper .lastfm a {\n  color: #ff7d2e;\n}\n#profileWrapper .lastfm h1 {\n  font-size: 24px;\n  margin-bottom: 16px;\n}\n#profileWrapper .lastfm .buttons {\n  margin-top: 16px;\n}\n#profileWrapper .lastfm .buttons .connect {\n  background: #d31f27;\n}\n#profileWrapper .lastfm .buttons .disconnect {\n  background: #3c3c3c;\n}\n@media only screen and (max-width: 667px) {\n#profileWrapper input[type=text], #profileWrapper input[type=email], #profileWrapper input[type=password] {\n    width: 100%;\n    height: 32px;\n}\n}",""])}}]);