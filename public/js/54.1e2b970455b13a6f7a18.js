(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"04tD":function(t,e,a){"use strict";a.r(e);var i=a("c8RX"),n=a("JspL"),s=function(t,e,a,i){return new(a||(a=Promise))((function(n,s){function l(t){try{r(i.next(t))}catch(t){s(t)}}function u(t){try{r(i.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(l,u)}r((i=i.apply(t,e||[])).next())}))},l=n.a.extend({components:{FormBase:()=>a.e(8).then(a.bind(null,"qTjX")),RuleGroup:()=>a.e(9).then(a.bind(null,"316D")),SoundBar:()=>a.e(1).then(a.bind(null,"yt5i")),Btn:()=>a.e(0).then(a.bind(null,"i0GK"))},props:{playlist:{required:!0,type:Object}},data:()=>({meta:{loading:!1},mutatedPlaylist:null}),methods:{addGroup(){this.mutatedPlaylist.rules.push(this.createGroup())},onGroupChanged(t){const e=Object.assign(this.mutatedPlaylist.rules.find(e=>e.id===t.id),t);0===e.rules.length&&(this.mutatedPlaylist.rules=this.mutatedPlaylist.rules.filter(t=>t.id!==e.id))},close(){this.$emit("close")},submit(){return s(this,void 0,void 0,(function*(){this.meta.loading=!0,yield i.e.update(this.mutatedPlaylist),Object.assign(this.playlist,this.mutatedPlaylist),this.meta.loading=!1,this.close(),yield i.e.fetchSongs(this.playlist)}))},createGroup:()=>i.e.createEmptySmartPlaylistRuleGroup()},created(){this.mutatedPlaylist=Object.assign({},this.playlist)}}),u=a("KHd+"),r=Object(u.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form-base",[a("div",{staticClass:"create-smart-playlist"},[t.meta.loading?a("sound-bar"):a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("header",[a("h1",[t._v("Edit Smart Playlist")])]),t._v(" "),a("div",[a("div",{staticClass:"form-row"},[a("label",[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.mutatedPlaylist.name,expression:"mutatedPlaylist.name"}],attrs:{type:"text",required:""},domProps:{value:t.mutatedPlaylist.name},on:{input:function(e){e.target.composing||t.$set(t.mutatedPlaylist,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row rules"},[t._l(t.playlist.rules,(function(e,i){return a("rule-group",{key:e.id,attrs:{isFirstGroup:0===i,group:e},on:{input:t.onGroupChanged}})})),t._v(" "),a("a",{staticClass:"btn btn-small",on:{click:function(e){return e.preventDefault(),t.addGroup(e)}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" GROUP")])],2)]),t._v(" "),a("footer",[a("btn",{attrs:{green:"",type:"submit"}},[t._v("Save")]),t._v(" "),a("btn",{staticClass:"btn-cancel",attrs:{white:""},on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v("Cancel")])],1)])],1)])}),[],!1,null,null,null);e.default=r.exports}}]);