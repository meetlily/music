(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+JLS":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,'.cover[data-v-0d78d071] {\n  position: relative;\n  width: 100%;\n  display: block;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center center;\n}\n.cover[data-v-0d78d071]::after {\n  content: "";\n  display: block;\n  padding-top: 100%;\n}\n.cover .control[data-v-0d78d071] {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.cover .control[data-v-0d78d071]::before {\n  position: absolute;\n  content: "";\n  width: 100%;\n  height: 100%;\n  top: 0;\n  background: rgba(0, 0, 0, 0.3);\n  opacity: 0;\n  z-index: 1;\n}\n.cover .control[data-v-0d78d071]::after {\n  content: "";\n  width: 60%;\n  max-width: 128px;\n  height: 60%;\n  max-height: 128px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzcHgiIGhlaWdodD0iMTMxcHgiIHZpZXdCb3g9IjAgMCAxMTMgMTMxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGcgaWQ9InRyaWFuZ2xlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cG9seWdvbiBpZD0iUG9seWdvbiIgZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSIxMTMuMDIzNzI5IDY1LjI1NDI4MDMgLTEuNTg1Njc4MzFlLTE0IDEzMC41MDg1NjEgLTUuNjg0MzQxODllLTE0IDAiPjwvcG9seWdvbj4KICAgIDwvZz4KPC9zdmc+);\n  background-size: 45%;\n  background-position: 58% 50%;\n  background-repeat: no-repeat;\n  border-radius: 50%;\n  background-color: #000;\n  opacity: 0;\n  z-index: 2;\n}\n.cover .control[data-v-0d78d071]:hover::before, .cover .control[data-v-0d78d071]:hover::after, .cover .control[data-v-0d78d071]:focus::before, .cover .control[data-v-0d78d071]:focus::after {\n  transition: 0.3s opacity;\n  opacity: 1;\n}\n.cover .control[data-v-0d78d071]:active::before {\n  background: rgba(0, 0, 0, 0.5);\n}\n.cover .control[data-v-0d78d071]:active::after {\n  transform: scale(0.9);\n}\n.cover .drop-zone[data-v-0d78d071] {\n  font-size: 4rem;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  place-content: center;\n  place-items: center;\n  background: rgba(0, 0, 0, 0.7);\n  display: none;\n}\n.cover.droppable[data-v-0d78d071] {\n  border: 2px dotted white;\n  -webkit-filter: brightness(0.4);\n          filter: brightness(0.4);\n}\n.cover.droppable .control[data-v-0d78d071] {\n  opacity: 0;\n}',""])},"4fT3":function(t,n,e){var a=e("+JLS");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(a,r);a.locals&&(t.exports=a.locals)},A9fp:function(t,n,e){"use strict";e.r(n);var a=e("JspL"),r=e("9EAu"),o=e("c8RX"),i=e("OUsP"),s=e("ilaN"),d=function(t,n,e,a){return new(e||(e=Promise))((function(r,o){function i(t){try{d(a.next(t))}catch(t){o(t)}}function s(t){try{d(a.throw(t))}catch(t){o(t)}}function d(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}d((a=a.apply(t,n||[])).next())}))};const c=["image/jpeg","image/gif","image/png"];var l=a.a.extend({props:{entity:{type:Object,required:!0}},data:()=>({droppable:!1,userState:o.l.state}),computed:{forAlbum(){return"artist"in this.entity},sortKeys(){return this.forAlbum?["disc","track"]:["album_id","disc","track"]},backgroundImageUrl(){if(this.forAlbum){const t=this.entity;return t.cover?t.cover:Object(s.k)()}{const t=this.entity;return t.image?t.image:Object(s.k)()}},buttonLabel(){return this.forAlbum?"Play all songs in the album "+this.entity.name:"Play all songs by the artist "+this.entity.name},playbackFunc(){return this.forAlbum?i.g.playAllInAlbum:i.g.playAllByArtist},allowsUpload(){return this.userState.current.is_admin}},methods:{playOrQueue(t){t.metaKey||t.ctrlKey?o.g.queue(Object(r.orderBy)(this.entity.songs,this.sortKeys)):this.playbackFunc.call(i.g,this.entity,!1)},onDragEnter(){this.droppable=this.allowsUpload},onDragLeave(){this.droppable=!1},onDrop(t){return d(this,void 0,void 0,(function*(){if(this.droppable=!1,this.allowsUpload&&this.validImageDropEvent(t))try{const n=yield s.g.readAsDataUrl(t.dataTransfer.files[0]);this.forAlbum?(this.entity.cover=n,o.a.uploadCover(this.entity,n)):(this.entity.image=n,o.b.uploadImage(this.entity,n))}catch(t){console.error(t)}}))},validImageDropEvent:t=>!(!t.dataTransfer||!t.dataTransfer.items)&&(1===t.dataTransfer.items.length&&("file"===t.dataTransfer.items[0].kind&&!!c.includes(t.dataTransfer.items[0].getAsFile().type)))}}),u=(e("v9uS"),e("KHd+")),p=Object(u.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("span",{staticClass:"cover",class:{droppable:t.droppable},style:{backgroundImage:"url("+t.backgroundImageUrl+")"}},[e("a",{staticClass:"control control-play font-size-0",attrs:{href:"",role:"button"},on:{click:function(n){return n.preventDefault(),t.playOrQueue(n)},dragenter:function(n){return n.preventDefault(),t.onDragEnter(n)},dragleave:function(n){return n.preventDefault(),t.onDragLeave(n)},drop:function(n){return n.stopPropagation(),n.preventDefault(),t.onDrop(n)},dragover:function(t){t.preventDefault()}}},[t._v("\n    "+t._s(t.buttonLabel)+"\n  ")])])}),[],!1,null,"0d78d071",null);n.default=p.exports},v9uS:function(t,n,e){"use strict";var a=e("4fT3");e.n(a).a}}]);